<div [formGroup]="optionsFrom" class="satisfaction-options-group">
  <h3 class="group-label">Opciones de SatisfacciÃ³n:</h3>

  <div [formArrayName]="'opciones'" class="satisfaction-options-container">
    @let optionsControls = optionsFrom.controls.opciones.controls;
    @for (opcion of optionsControls; let i = $index; track opcion) {
    <div class="option-row" [formGroupName]="i">
      <div class="input-wrapper">
        
        <input type="text" id="option-{{i}}" placeholder="OpciÃ³n de satisfacciÃ³n" formControlName="option" />
       
      </div>
      <div class="input-wrapper">
        <input type="text" id="label-{{i}}" placeholder="Etiqueta de satisfacciÃ³n" formControlName="label" />
       

      </div>
      
      <div class="order-buttons-wrapper">
        <button
          type="button"
          class="order-btn order-up-btn"
          [disabled]="i === 0"
          aria-label="Mover opciÃ³n hacia arriba"
          (click)="moveUp(i)"
        >
          â†‘
        </button>
        <button type="button" class="order-btn order-down-btn" [disabled]="i === optionsControls.length - 1"
         aria-label="Mover opciÃ³n hacia abajo" (click)="moveDown(i)"
        >
          â†“
        </button>
      </div>

      @if (optionsControls.length > 1) {
      <button type="button" class="remove-option-btn" (click)="deleteControl(i)" aria-label="Eliminar opciÃ³n">
        X
      </button>
      }
    
      @if (opcion.get('option')?.touched || opcion.get('option')?.invalid){
        @if (opcion.get('option')?.hasError('required')){
          <span class="field-error-message">ðŸš¨ Campo requerido</span>}
        @else if (opcion.get('option')?.hasError('minlength')){
          <span class="field-error-message">ðŸš¨ Debe tener al menos 3 caracteres</span>
        }
      }

    </div>

    }
  </div>
  <button type="button" class="add-option-btn" id="addOptionBtn" (click)="addControl()">
    Agregar OpciÃ³n
  </button>
</div>